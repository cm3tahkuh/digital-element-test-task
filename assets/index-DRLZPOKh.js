(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=r(t);fetch(t.href,s)}})();class n{constructor(){this.modal=document.getElementById("contactModal"),this.openButton=document.querySelector(".cta__button"),this.closeButton=this.modal.querySelector("[data-close]"),this.form=document.getElementById("contactForm"),this.successPopup=document.getElementById("successPopup"),this.registerEvents()}registerEvents(){this.openButton.addEventListener("click",()=>this.openModal()),this.closeButton.addEventListener("click",()=>this.closeModal()),this.modal.addEventListener("click",e=>{e.target===this.modal&&this.closeModal()}),this.form.addEventListener("submit",e=>this.handleSubmit(e))}openModal(){this.modal.classList.add("modal--active"),document.body.style.overflow="hidden"}closeModal(){this.modal.classList.remove("modal--active"),document.body.style.overflow=""}validateForm(){let e=!0;const r=this.form.querySelector('[name="name"]'),o=this.form.querySelector('[name="email"]'),t=this.form.querySelector('[name="message"]');return[r,o,t].forEach(s=>{s.classList.remove("is-invalid");const i=s.nextElementSibling;i&&i.classList.contains("contact-form__error")&&i.remove()}),r.value.trim()||(this.showError(r,"Name is required"),e=!1),this.isValidEmail(o.value)||(this.showError(o,"Enter a valid email"),e=!1),t.value.trim()||(this.showError(t,"Message is required"),e=!1),e}showError(e,r){if(e.previousElementSibling&&e.previousElementSibling.classList.contains("contact-form__error"))return;e.classList.add("is-invalid");const o=document.createElement("div");o.className="contact-form__error",o.textContent=r,e.insertAdjacentElement("beforebegin",o),setTimeout(()=>{o&&o.parentNode&&(o.remove(),e.classList.remove("is-invalid"))},3e3)}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}async handleSubmit(e){if(e.preventDefault(),!!this.validateForm())try{await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:new FormData(this.form)}),this.form.reset(),this.closeModal(),this.showSuccessPopup()}catch(r){console.error("Submit error:",r)}}showSuccessPopup(){this.successPopup.classList.add("success-popup--active"),setTimeout(()=>{this.successPopup.classList.remove("success-popup--active")},3e3)}}document.addEventListener("DOMContentLoaded",()=>{new n});
